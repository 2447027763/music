(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37dfcec7"],{"08d2":function(t,e,s){"use strict";s("5430")},"13d5":function(t,e,s){"use strict";var i=s("23e7"),r=s("d58f").left,n=s("a640"),a=s("ae40"),o=s("2d00"),c=s("605d"),u=n("reduce"),h=a("reduce",{1:0}),l=!c&&o>79&&o<83;i({target:"Array",proto:!0,forced:!u||!h||l},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"250f":function(t,e,s){"use strict";s("6c5f")},"2d3b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("div",{staticClass:"searchHeader"},[s("div",{staticClass:"searchMid"},[s("i"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"inputText",attrs:{type:"text",placeholder:"搜索歌曲、歌手、专辑"},domProps:{value:t.value},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterSearch(e)},input:function(e){e.target.composing||(t.value=e.target.value)}}}),s("span",[s("i",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],on:{click:t.clearValue}})])])]),s("div",{staticClass:"searchList"},[s("HotSearch",{directives:[{name:"show",rawName:"v-show",value:t.showHotList,expression:"showHotList"}],attrs:{hotList:t.hotList},on:{hotresultvalue:t.hotresultvalue}}),s("SearchHistory",{directives:[{name:"show",rawName:"v-show",value:t.showHotList,expression:"showHotList"}],attrs:{searchHistoryList:t.searchHistoryList},on:{historyResult:t.historyResult,removehistory:t.removehistory}}),s("Suggest",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}],attrs:{keyValue:t.value,suggests:t.suggests},on:{searchResult:t.searchList}}),s("Musicitem",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],attrs:{newMusicList:t.changeMusicList}}),s("Loading",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}]})],1)])},r=[],n=(s("99af"),s("4de4"),s("c975"),s("13d5"),s("fb6a"),s("b0c0"),s("d3b7"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"suggest"},[s("li",{staticClass:"suggestHeader"},[t._v(' 搜索:"'+t._s(t.keyValue)+'" ')]),s("Loading",{directives:[{name:"show",rawName:"v-show",value:0==t.suggests.length,expression:"suggests.length==0"}]}),t._l(t.suggests,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.$emit("searchResult",e.name)}}},[t._v(t._s(t._f("filtType")(e))+t._s(e.name))])}))],2)}),a=[],o=s("3a5e"),c={components:{Loading:o["a"]},props:{suggests:{type:Array,default:function(){return[]}},keyValue:String},filters:{filtType:function(t){return"undefined"!=typeof t.artists?"歌曲:":"undefined"!=typeof t.artist?"专辑:":"歌手:"}}},u=c,h=(s("84db"),s("2877")),l=Object(h["a"])(u,n,a,!1,null,"09b6a858",null),d=l.exports,f=s("01f3"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hotSearch"},[s("div",{staticClass:"hotSearchHeader"},[s("div",{staticClass:"hotSearchTitle"},[t._v(" 热门搜索 ")]),s("ul",{staticClass:"hot"},[s("Loading",{directives:[{name:"show",rawName:"v-show",value:0==t.hotList.length,expression:"hotList.length==0"}]}),t._l(t.hotList,(function(e,i){return s("li",{key:i,on:{click:function(s){return t.$emit("hotresultvalue",e.searchWord)}}},[t._v(t._s(e.searchWord))])}))],2)])])},g=[],w={components:{Loading:o["a"]},props:{hotList:{type:Array,default:function(){return[]}}}},p=w,L=(s("08d2"),Object(h["a"])(p,v,g,!1,null,"109449f8",null)),y=L.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"searchHistory"},t._l(t.searchHistoryList,(function(e,i){return s("li",{key:i},[s("span"),s("div",{on:{click:function(s){return t.$emit("historyResult",e)}}},[t._v(t._s(e))]),s("i",{on:{click:function(s){return t.$emit("removehistory",e)}}})])})),0)},x=[],H={props:["searchHistoryList"],components:{}},b=H,_=(s("72d9"),Object(h["a"])(b,m,x,!1,null,"e4e7d028",null)),k=_.exports,S={components:{Suggest:d,Loading:o["a"],Musicitem:f["a"],HotSearch:y,SearchHistory:k},data:function(){return{value:"",suggests:[],searching:!1,searchMusicList:[],showList:!1,changeMusicList:[],showHotList:!0,hotList:[],searchHistoryList:[]}},beforeRouteEnter:function(t,e,s){s((function(t){""==t.value?(t.showHotList=!0,t.$axios("/search/hot/detail").then((function(e){t.hotList=e.data.data.slice(0,10),s()}))):s()}))},methods:{clearValue:function(){this.value=""},historyResult:function(t){this.value=t,this.searchList(t)},enterSearch:function(){this.searchList(this.value)},hotresultvalue:function(t){this.value=t,this.searchList(t)},removehistory:function(t){this.searchHistoryList=this.searchHistoryList.filter((function(e){return e!=t}))},searchList:function(t){var e=this;this.showHotList=!1,this.searching=!1,-1==this.searchHistoryList.indexOf(t)&&(console.log(t),this.searchHistoryList.unshift(t)),this.value=t,this.axios.get("/search?keywords="+t).then((function(t){if(200==t.data.code){e.searching=!1,e.showList=!0,e.searchMusicList=t.data.result.songs,e.changeMusicList=[];for(var s=0;s<e.searchMusicList.length;s++){var i=e.searchMusicList[s].name,r=e.searchMusicList[s].id;e.changeMusicList.push({name:i,id:r,song:{artists:[{name:e.searchMusicList[s].artists[0].name}],privilege:{maxbr:999999}}})}}}))}},watch:{value:function(t){var e=this;if(""==t)return this.showHotList=!0,this.searching=!1,this.showList=!1,void(this.suggests=[]);this.$axios.get("/search/suggest?keywords="+t).then((function(t){if(e.showHotList=!1,e.searching=!0,e.showList=!1,200==t.data.code&&t.data.result.order){var s=t.data.result,i=s.order.reduce((function(t,e){return"playlist"!==e?t.concat(s[e]):t}),[]);e.suggests=i,e.showHotList=!1,e.showList=!1}})).finally((function(){if(""==e.value)return e.showHotList=!0,e.searching=!1,e.showList=!1,void(e.suggests=[])}))}}},C=S,M=(s("250f"),Object(h["a"])(C,i,r,!1,null,"05d10e03",null));e["default"]=M.exports},"4de4":function(t,e,s){"use strict";var i=s("23e7"),r=s("b727").filter,n=s("1dde"),a=s("ae40"),o=n("filter"),c=a("filter");i({target:"Array",proto:!0,forced:!o||!c},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},5430:function(t,e,s){},"6c5f":function(t,e,s){},"72d9":function(t,e,s){"use strict";s("847d")},"847d":function(t,e,s){},"84db":function(t,e,s){"use strict";s("dd4a")},"99af":function(t,e,s){"use strict";var i=s("23e7"),r=s("d039"),n=s("e8b5"),a=s("861d"),o=s("7b0b"),c=s("50c4"),u=s("8418"),h=s("65f0"),l=s("1dde"),d=s("b622"),f=s("2d00"),v=d("isConcatSpreadable"),g=9007199254740991,w="Maximum allowed index exceeded",p=f>=51||!r((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),L=l("concat"),y=function(t){if(!a(t))return!1;var e=t[v];return void 0!==e?!!e:n(t)},m=!p||!L;i({target:"Array",proto:!0,forced:m},{concat:function(t){var e,s,i,r,n,a=o(this),l=h(a,0),d=0;for(e=-1,i=arguments.length;e<i;e++)if(n=-1===e?a:arguments[e],y(n)){if(r=c(n.length),d+r>g)throw TypeError(w);for(s=0;s<r;s++,d++)s in n&&u(l,d,n[s])}else{if(d>=g)throw TypeError(w);u(l,d++,n)}return l.length=d,l}})},a640:function(t,e,s){"use strict";var i=s("d039");t.exports=function(t,e){var s=[][t];return!!s&&i((function(){s.call(null,e||function(){throw 1},1)}))}},c975:function(t,e,s){"use strict";var i=s("23e7"),r=s("4d64").indexOf,n=s("a640"),a=s("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,u=n("indexOf"),h=a("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!u||!h},{indexOf:function(t){return c?o.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},d58f:function(t,e,s){var i=s("1c0b"),r=s("7b0b"),n=s("44ad"),a=s("50c4"),o=function(t){return function(e,s,o,c){i(s);var u=r(e),h=n(u),l=a(u.length),d=t?l-1:0,f=t?-1:1;if(o<2)while(1){if(d in h){c=h[d],d+=f;break}if(d+=f,t?d<0:l<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:l>d;d+=f)d in h&&(c=s(c,h[d],d,u));return c}};t.exports={left:o(!1),right:o(!0)}},dd4a:function(t,e,s){}}]);
//# sourceMappingURL=chunk-37dfcec7.05a11740.js.map